@using Domain.Characters
@using UI.ViewModels

<MudCard Outlined="true">
	<MudCardHeader>
		<MudText>Choose a background</MudText>
	</MudCardHeader>
	<MudCardContent>
		<MudSelect @bind-Value="Background.Background" Label="Background">
			@foreach (var vOption in Options)
			{
				<MudSelectItem T="BackgroundOption" Value="vOption.Option">
					<MudText>@vOption.DisplayName</MudText>
					<MudText>@vOption.Example</MudText>
				</MudSelectItem>
			}
		</MudSelect>
		<MudText>@Example()</MudText>
		<MudTextField @bind-Value="Background.Description" HelperText="What did you do before joining the crew?" Placeholder="A snoozing, indebted student" />
	</MudCardContent>
</MudCard>

@code
{
	[Parameter, EditorRequired]
	public DossierBackground Background { get; set; } = new();

	private string Example() =>
		Example(Background.Background);

	private string Example(BackgroundOption option) =>
		Options.First(o => o.Option == option).Example;

	private IReadOnlyCollection<VBackground> Options => VBackground.Options;
}
